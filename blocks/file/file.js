import"https://cdn.jsdelivr.net/npm/@finos/perspective-viewer@3.2.1/dist/cdn/perspective-viewer.js";import"https://cdn.jsdelivr.net/npm/@finos/perspective-viewer-datagrid@3.2.1/dist/cdn/perspective-viewer-datagrid.js";import"https://cdn.jsdelivr.net/npm/@finos/perspective-viewer-d3fc@3.2.1/dist/cdn/perspective-viewer-d3fc.js";import"https://cdn.jsdelivr.net/npm/@finos/perspective-viewer-openlayers/dist/cdn/perspective-viewer-openlayers.js";import e from"https://cdn.jsdelivr.net/npm/@finos/perspective@3.2.1/dist/cdn/perspective.js";const t=await e.worker();var n=document.getElementById("drop-area"),r=document.getElementById("fileElem");function i(e){e.preventDefault(),e.stopPropagation()}function d(){n.classList.add("highlight")}function s(){n.classList.remove("highlight")}function a(e){[...e].forEach(o)}function o(e){let r=new FileReader;r.onload=function(r){let i=r.target.result;const d=n.parentElement;d.removeChild(n);const s=document.createElement("perspective-viewer");d.appendChild(s),e.name.endsWith(".feather")||e.name.endsWith(".arrow")?s.load(t.table(i)):s.load(t.table(i,{format:"csv"}))},r.readAsArrayBuffer(e)}n.addEventListener("dragenter",(()=>{}),!1),n.addEventListener("dragleave",(()=>{}),!1),n.addEventListener("dragover",(()=>{}),!1),n.addEventListener("drop",(e=>console.log(e)),!1),["dragenter","dragover","dragleave","drop"].forEach((e=>{n.addEventListener(e,i,!1)})),["dragenter","dragover"].forEach((function(e){n.addEventListener(e,d,!1)})),["dragleave","drop"].forEach((function(e){n.addEventListener(e,s,!1)})),n.addEventListener("drop",(function(e){a(e.dataTransfer.files)}),!1),r.addEventListener("change",(function(){a(this.files)}));