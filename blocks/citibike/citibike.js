import"https://cdn.jsdelivr.net/npm/@finos/perspective-viewer@3.2.1/dist/cdn/perspective-viewer.js";import"https://cdn.jsdelivr.net/npm/@finos/perspective-workspace@3.2.1/dist/cdn/perspective-workspace.js";import"https://cdn.jsdelivr.net/npm/@finos/perspective-viewer-datagrid@3.2.1/dist/cdn/perspective-viewer-datagrid.js";import"https://cdn.jsdelivr.net/npm/@finos/perspective-viewer-d3fc@3.2.1/dist/cdn/perspective-viewer-d3fc.js";import"https://cdn.jsdelivr.net/npm/@finos/perspective-viewer-openlayers/dist/cdn/perspective-viewer-openlayers.js";import e from"https://cdn.jsdelivr.net/npm/@finos/perspective@3.2.1/dist/cdn/perspective.js";async function t(e,s){const i=`https://gbfs.citibikenyc.com/gbfs/en/${e}.json`,{data:{stations:n},ttl:o}=await function(e){return new Promise((t=>{const s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType="json",s.onload=()=>t(s.response),s.send(null)}))}(i);if("function"!=typeof s)return n;s(n),setTimeout((()=>t(e,s)),1e3*o)}const s=await e.worker();async function i(e){const t=e.slice(0,1);delete t[0].rental_methods,delete t[0].rental_uris,delete t[0].eightd_station_services;const i=await s.table(t),n=await i.schema();return await i.delete(),n}!async function(){const e=await Promise.all(["station_status","station_information"].map(t)),n=await async function(e){const t=await Promise.all(e.map(i));return Object.assign({},...t)}(e),o=await s.table(n,{index:"station_id"});for(let t of e)o.update(t);t("station_status",o.update.bind(o)),window.workspace.tables.set("citibike",Promise.resolve(o));const r=await async function(){const e=await fetch("layout.json");return await e.json()}();window.workspace.restore(r)}();